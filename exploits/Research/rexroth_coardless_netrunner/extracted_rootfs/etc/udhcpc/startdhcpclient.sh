#!/bin/sh
WLAN_IF="tiwlan0"
loggerName=startdhcpclient.sh

PID=`ps | grep "[u]dhcpc -i tiwlan0" | awk '{print $1}'`
kill -SIGUSR2 $PID &> /dev/null
kill -SIGTERM $PID &> /dev/null

name=`hostname`
udhcpc -i $WLAN_IF -S -x hostname=$name -s /etc/udhcpc/simple.script &
#udhcpc -i $WLAN_IF -S --hostname=$name -s /etc/udhcpc/simple.script &

if [ "$?" -eq "0" ]; then
   logger -s -t $loggerName "Info: start udhcpc-client SUCCESS hostname<$name>"
else 
   logger -s -t $loggerName "Err: start udhcpc-client FAILED hostname<$name>"
fi
