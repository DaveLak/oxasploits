Ext.define('BS350.controller.DiagnosisCtrl',
{
  extend: 'Ext.app.Controller',

  views: ['DiagnosisView', 'SysInfoView', 'ChannelView', 'LogView', 'LogMessagesView', 'SysErrorsView', 'ReadyStatusView'],
  stores: ['ChannelStore', 'LogStore', 'LogMessagesStore', 'SysErrorsStore', 'SysErrorsStatisticStore'],

  refs : [ {ref:'DiagnosisView',selector:'#DiagnosisView'} ],

  init: function(application) {
    application.desktopShortcuts.push(
        { name: TR('Diagnosis'), iconCls: 'diagnosis-shortcut', module: 'DiagnosisCtrl' }
      );

      application.startMenuItems.push(
        { text: TR('Diagnosis'), iconCls:'diagnosis-icon', handler : this.createWindow, scope: this }
      );
  },

  onLaunch: function(application) {
    this.desktop = application.desktop;
  },

  createWindow : function()
  {
    var win = this.desktop.getWindow('diagnosis-win');
    if(!win)
    {
      win = this.desktop.createWindow({
        title: TR('Diagnosis'),
        id: 'diagnosis-win',
        iconCls: 'diagnosis-icon',
        height: 480,
        width: 640,
        animCollapse:false,
        layout: 'fit',
        items: [
          {
            xtype: 'diagnosisview',
            itemId: 'DiagnosisView'
          }
        ]
      });
    }
    win.show();
    return win;
  }
});

