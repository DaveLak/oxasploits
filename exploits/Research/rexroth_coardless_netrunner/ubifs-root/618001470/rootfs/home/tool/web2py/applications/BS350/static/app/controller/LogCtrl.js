/*global Ext: false, TR: false */
Ext.define('BS350.controller.LogCtrl', {
  extend: 'BS350.custom.ViewController',

  views: ['LogView'],
  stores: ['LogStore'],

  items: [
    {name: 'logGrid', query: '#logGrid'},
    {name: 'btnUpdate', query: '#btnUpdate', actions: {click: 'updateLog'}},
    {name: 'btnClear', query: '#btnClear', actions: {click: 'clearLog'}}
  ],

  initView: function () {
    this.updateLog();
    if (this.access !== 'w') {
      this.V.btnClear.hide();
    }
  },

  updateLog : function () {
    this.V.logGrid.getStore().load();
  },

  clearLog : function () {
    var store = this.V.logGrid.getStore();
    Ext.Ajax.request({ url: '/BS350/diagnosis/clearlog', success: function (res) { store.load(); } });
  }

});

